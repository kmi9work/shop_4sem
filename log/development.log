# Logfile created on Wed May 26 22:12:32 +0400 2010  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 22:43:18) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;36;1mItem Load (768.4ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (292.6ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (60.7ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Completed in 2291ms (View: 858, DB: 1122) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:44:22) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (72.3ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (31.2ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (11.0ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 257ms (View: 122, DB: 119) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:45:01) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.7ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 55ms (View: 36, DB: 4) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:45:18) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.8ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 61ms (View: 39, DB: 5) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:46:19) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m

ActionView::TemplateError (undefined local variable or method `item' for #<ActionView::Base:0x1a098e8>) on line #59 of app/views/items/show.html.erb:
56:                               act = :plus_cat
57:                             end
58:                             link_to_remote image_tag("up.png"), 
59:                               :update => "rating#{item.id}", 
60:                               :url => {:action => act, :id => item.id}%></div> 
61:         <div class="plus"><%= if params['catalogue_id'].blank?
62:                               act = :minus

    app/views/items/show.html.erb:59
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (93.9ms)
Rendered rescues/_request_and_response (13.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:47:14) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m

ActionView::TemplateError (undefined local variable or method `act' for #<ActionView::Base:0x1a0d9ac>) on line #55 of app/views/items/show.html.erb:
52:       <td id="rating<%=@item.id%>"><%= @item.rating %> | 
53:         <div class="plus"><%= link_to_remote image_tag("up.png"), 
54:                               :update => "rating#{@item.id}", 
55:                               :url => {:action => act, :id => item.id}%></div> 
56:         <div class="plus"><%= link_to_remote image_tag("down.png"), 
57:                               :update => "rating#{@item.id}", 
58:                               :url => {:action => act, :id => item.id}%></div>

    app/views/items/show.html.erb:55
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (99.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:48:38) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 60ms (View: 41, DB: 4) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 22:48:42) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (35.9ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (36.4ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:48:42.436791', "rating" = 11 WHERE "id" = 3[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Completed in 101ms (View: 1, DB: 75) | 200 OK [http://localhost/items/plus/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:49:31) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 58ms (View: 37, DB: 5) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 22:49:50) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 3) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 54ms (View: 34, DB: 4) | 200 OK [http://localhost/items/show/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 22:49:51) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.4ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:49:51.587592', "rating" = 12 WHERE "id" = 3[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 29ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#minus (for 127.0.0.1 at 2010-05-26 22:49:51) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.6ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.7ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:49:52.003089', "rating" = 11 WHERE "id" = 3[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 30ms (View: 1, DB: 5) | 200 OK [http://localhost/items/minus/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 22:49:52) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.6ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.4ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:49:52.487446', "rating" = 12 WHERE "id" = 3[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mCOMMIT[0m
Completed in 29ms (View: 1, DB: 4) | 200 OK [http://localhost/items/plus/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 22:49:52) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.4ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:49:52.663245', "rating" = 13 WHERE "id" = 3[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Completed in 30ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 22:49:52) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.6ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.5ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 18:49:52.834825', "rating" = 14 WHERE "id" = 3[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Completed in 31ms (View: 2, DB: 4) | 200 OK [http://localhost/items/plus/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 22:50:34) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;35;1mItem Load (2.3ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (2.6ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Completed in 72ms (View: 58, DB: 6) | 200 OK [http://localhost/items/list?catalogue_id=2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 22:50:41) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;36;1mItem Load (2.2ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Completed in 44ms (View: 30, DB: 4) | 200 OK [http://localhost/items/list?catalogue_id=2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 22:50:56) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;35;1mItem Load (2.4ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Completed in 47ms (View: 32, DB: 5) | 200 OK [http://localhost/items/list?catalogue_id=2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:10:22) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;36;1mItem Load (2.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m

ActionView::TemplateError (String can't be coerced into Float) on line #35 of app/views/items/list.html.erb:
32:         <TD><%= item.name %></TD>
33:         <%= inline_menu(item) %>
34:         <td>
35:           <%= item.price ? item.price + "руб." : "Уточните у менеджера" %> 
36:         </td>
37:         <td>
38:           <%= item.quantity or "Нет в наличии"%>

    app/views/items/list.html.erb:35:in `+'
    app/views/items/list.html.erb:35
    app/views/items/list.html.erb:30:in `each'
    app/views/items/list.html.erb:30
    app/views/items/list.html.erb:2
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (102.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:11:09) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;35;1mItem Load (2.2ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.3ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Completed in 70ms (View: 53, DB: 9) | 200 OK [http://localhost/items/list?catalogue_id=2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 23:11:20) [GET]
  Parameters: {"id"=>"7"}
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.6ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 7) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 59ms (View: 38, DB: 5) | 200 OK [http://localhost/items/show/7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 23:12:15) [GET]
  Parameters: {"id"=>"7"}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (0.7ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 7) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 58ms (View: 39, DB: 4) | 200 OK [http://localhost/items/show/7]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 23:12:28) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"7", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.7ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.6ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.5ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 19:12:28.849580', "rating" = 11 WHERE "id" = 7[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mCOMMIT[0m
Completed in 89ms (View: 1, DB: 5) | 200 OK [http://localhost/items/plus/7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 23:12:28) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"7", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.5ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 19:12:28.936751', "rating" = 12 WHERE "id" = 7[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 29ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/7]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-26 23:12:29) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"7", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;36;1mCatalogue Exists (0.6ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;35;1mItem Update (0.9ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 19:12:29.081479', "rating" = 13 WHERE "id" = 7[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 34ms (View: 1, DB: 4) | 200 OK [http://localhost/items/plus/7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:12:50) [GET]
  Parameters: {"catalogue_id"=>"2"}
  [4;35;1mItem Load (2.2ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'2') [0m
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'2') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 118ms (View: 101, DB: 9) | 200 OK [http://localhost/items/list?catalogue_id=2]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:12:55) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "catalogue_id"=>""}
  [4;35;1mItem Load (2.1ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (13.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 90ms (View: 57, DB: 24) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (1.4ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:13:10) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "catalogue_id"=>"1"}
  [4;36;1mItem Load (2.2ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'1') [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'1') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 57ms (View: 43, DB: 8) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:13:19) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 69ms (View: 49, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-26 23:13:21) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (2.9ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 2) [0m
  [4;35;1mCatalogue Load (2.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 97ms (View: 73, DB: 9) | 200 OK [http://localhost/items/show/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:13:23) [GET]
  Parameters: {"catalogue_id"=>"1"}
  [4;35;1mItem Load (2.1ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'1') [0m
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'1') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 101ms (View: 86, DB: 7) | 200 OK [http://localhost/items/list?catalogue_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:13:27) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.2ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (1.1ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Completed in 72ms (View: 51, DB: 13) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-26 23:13:37) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.6ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.7ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-26 19:13:37.553067', "rating" = 41 WHERE "id" = 2[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
Completed in 32ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:18:25) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.3ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.9ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 131ms (View: 110, DB: 13) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m
/!\ FAILSAFE /!\  Wed May 26 23:25:18 +0400 2010
  Status: 500 Internal Server Error
  /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/application_helper.rb:47: syntax error, unexpected kELSE, expecting kEND
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/application_helper.rb:61: syntax error, unexpected $end, expecting kEND
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:224:in `depend_on'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:136:in `require_dependency'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:197:in `default_helper_module!'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:212:in `__send__'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:212:in `inherited'
    /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/application_controller.rb:4
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:425:in `load_missing_constant'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:80:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:92:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:90:in `dispatch'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m
/!\ FAILSAFE /!\  Wed May 26 23:25:23 +0400 2010
  Status: 500 Internal Server Error
  /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/application_helper.rb:47: syntax error, unexpected kELSE, expecting kEND
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/application_helper.rb:61: syntax error, unexpected $end, expecting kEND
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:224:in `depend_on'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:136:in `require_dependency'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:197:in `default_helper_module!'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:212:in `__send__'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:212:in `inherited'
    /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/application_controller.rb:4
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:425:in `load_missing_constant'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:80:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:92:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:90:in `dispatch'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:26:58) [GET]
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 78ms (View: 59, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (2.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:27:05) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 80ms (View: 59, DB: 13) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:27:27) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.0ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (2.8ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 66ms (View: 46, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:47:31) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.3ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.8ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 74ms (View: 53, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:50:05) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.3ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.6ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 75ms (View: 53, DB: 13) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (4.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:50:11) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 81ms (View: 61, DB: 15) | 200 OK [http://localhost/operator]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-26 23:50:21) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItem Update (0.5ms)[0m   [0mUPDATE "items" SET "updated_at" = '2010-05-26 19:50:21.036265', "rating" = 51 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 28ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-26 23:50:27) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.6ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 130ms (View: 111, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#buy (for 127.0.0.1 at 2010-05-27 00:02:36) [POST]
  Parameters: {"authenticity_token"=>"Lfihc/ZJJK82qjFfCTBORPiAlNxUhkODxcrIkeO9ZfI=", "id"=>"6", "_"=>""}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:8: syntax error, unexpected ']', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
        item[:] +=1
               ^):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-27 00:02:45) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:8: syntax error, unexpected ']', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
        item[:] +=1
               ^):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (88.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-27 00:03:08) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (1.0ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (1.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 70ms (View: 49, DB: 13) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 12:25:46) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;36;1mItem Load (121.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (25.6ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (2.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (11.1ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (16.1ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 589ms (View: 306, DB: 184) | 200 OK [http://localhost/operator]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 12:25:53) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 62ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:25:56) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (14.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;35;1mCatalogue Exists (4.0ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;36;1mItem Update (0.5ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 08:25:56.154784', "rating" = 3 WHERE "id" = 6[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 51ms (View: 1, DB: 21) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:25:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 08:25:58.002298', "rating" = 4 WHERE "id" = 6[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 28ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:25:58) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;35;1mCatalogue Exists (0.6ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;36;1mItem Update (0.6ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 08:25:58.678660', "rating" = 5 WHERE "id" = 6[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 38ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:25:58) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 2) [0m
  [4;35;1mCatalogue Exists (0.7ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 2' AND "catalogues".id <> 2) LIMIT 1[0m
  [4;36;1mItem Update (0.6ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 08:25:58.895217', "rating" = 6 WHERE "id" = 6[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
Completed in 38ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 12:38:11) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 115ms (View: 97, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:38:12) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}

NoMethodError (undefined method `include?' for :buy:Symbol):
  app/controllers/items_controller.rb:8:in `buy'
  app/controllers/items_controller.rb:5:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (55.1ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 12:49:11) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:49:14) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #5 of app/views/items/_buy.html.erb:
2: Купить товар:
3: <% remote_form_for(:buy, @item) do %>
4:   <%= text_field_tag('item[quantity]', "Количество", :size => 3) %>
5:   Склад: <%= select_storage(@item.id) %>
6: <% end %>
7: </div>

    app/views/items/_buy.html.erb:5
    app/views/items/_buy.html.erb:3
    app/controllers/items_controller.rb:8:in `buy'
    app/controllers/items_controller.rb:5:in `buy'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (107.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 12:51:55) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 12:51:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

ActionView::TemplateError (undefined method `select_storage' for #<ActionView::Base:0x1243370>) on line #5 of app/views/items/_buy.html.erb:
2: Купить товар:
3: <% remote_form_for(:buy, @item) do %>
4:   <%= text_field_tag('item[quantity]', "Количество", :size => 3) %>
5:   Склад: <%= select_storage(@item.id) %>
6: <% end %>
7: </div>

    app/views/items/_buy.html.erb:5
    app/views/items/_buy.html.erb:3
    app/controllers/items_controller.rb:8:in `buy'
    app/controllers/items_controller.rb:5:in `buy'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (62.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#index (for 10.42.43.1 at 2010-05-29 12:54:24) [GET]

ActionController::RoutingError (No route matches "/anonimous" with {:method=>:get}):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:01:11) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.9ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 102, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:01:13) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (2.5ms)
Completed in 25ms (View: 7, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.6ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:03:26) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (2.6ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 76ms (View: 53, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:03:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:03:59) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.8ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:04:01) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.0ms)
Completed in 15ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:04:19) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:04:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 15ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:04:44) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 101, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:04:46) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.6ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:05:26) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:05:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (2.4ms)
Completed in 26ms (View: 7, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:08:35) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:08:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.6ms)
Completed in 18ms (View: 5, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:09:18) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.7ms)
Completed in 18ms (View: 5, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:09:29) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 101, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:30) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.7ms)
Completed in 19ms (View: 5, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:09:36) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"5", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 5) [0m
Rendered items/_buy (1.7ms)
Completed in 19ms (View: 5, DB: 1) | 200 OK [http://localhost/items/buy/5]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.5ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:09:42) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.2ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:45) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:09:48) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
Rendered items/_buy (1.6ms)
Completed in 20ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
Rendered items/_buy (1.1ms)
Completed in 20ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:50) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
Rendered items/_buy (1.7ms)
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"7", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
Rendered items/_buy (1.5ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/7]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:52) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"5", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 5) [0m
Rendered items/_buy (1.7ms)
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/5]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:09:53) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.5ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:10:54) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:10:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:10:56) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
Rendered items/_buy (1.6ms)
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:11:28) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.3ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:11:29) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:11:30) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
Rendered items/_buy (1.1ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:13:16) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:13:17) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.2ms)
Completed in 74ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:14:26) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:31) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
Rendered items/_buy (1.6ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:32) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
Rendered items/_buy (1.1ms)
Completed in 69ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:32) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
Rendered items/_buy (1.5ms)
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:33) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"7", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
Rendered items/_buy (1.1ms)
Completed in 17ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/7]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:34) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
Rendered items/_buy (1.2ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/3]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:34) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"5", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 5) [0m
Rendered items/_buy (1.1ms)
Completed in 15ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/5]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:14:35) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.2ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:16:57) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:17:00) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.6ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:18:06) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:18:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.9ms)
Completed in 26ms (View: 6, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:18:38) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 117ms (View: 99, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:18:40) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.4ms)
Completed in 18ms (View: 4, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:18:51) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.9ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:18:52) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

ActionView::TemplateError (undefined local variable or method `class_variables' for #<ActionView::Base:0x1c4cdd0>) on line #5 of app/views/items/_buy.html.erb:
2: Купить товар: 
3: <% remote_form_for(:buy, @item) do %>
4:   Количество: <%= text_field_tag('item[quantity]', 0, :size => 1) %><br>
5:   Склад: <%= class_variables.inspect %>
6: <% end %>
7: </div>

    app/views/items/_buy.html.erb:5
    app/views/items/_buy.html.erb:3
    app/controllers/items_controller.rb:13:in `buy'
    app/controllers/items_controller.rb:5:in `buy'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:19:01) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 120ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:19:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.9ms)
Completed in 26ms (View: 6, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:20:09) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.3ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 117ms (View: 99, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:20:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

NameError (uninitialized class variable @@fl in ItemsController):
  app/controllers/items_controller.rb:8:in `buy'
  app/controllers/items_controller.rb:5:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:20:40) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 102, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:20:42) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

NameError (uninitialized class variable @@fl in ItemsController):
  app/controllers/items_controller.rb:8:in `buy'
  app/controllers/items_controller.rb:5:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (55.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:21:15) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:21:17) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:21:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
Rendered items/_buy (1.1ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:21:35) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 120ms (View: 102, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:21:36) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

NameError (uninitialized class variable @@fl in ItemsController):
  app/controllers/items_controller.rb:8:in `buy'
  app/controllers/items_controller.rb:5:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (55.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:22:00) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:22:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:22:03) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
Rendered items/_buy (0.8ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:22:51) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:22:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (1.1ms)
Completed in 22ms (View: 3, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:25:42) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 120ms (View: 101, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:25:43) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (0.8ms)
Completed in 15ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:25:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
Rendered items/_buy (0.7ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:26:03) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 100, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#index (for 10.42.43.1 at 2010-05-29 13:38:23) [GET]

ActionController::RoutingError (No route matches "/anonimous" with {:method=>:get}):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:41:12) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:41:14) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

NameError (uninitialized class variable @@fl in ItemsController):
  app/controllers/items_controller.rb:11:in `buy'
  app/controllers/items_controller.rb:5:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:41:38) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (1.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 48, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:41:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
Rendered items/_buy (0.8ms)
Completed in 16ms (View: 2, DB: 1) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:42:20) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.4ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 44, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:42:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

ActionView::TemplateError (undefined method `select_storages' for #<ActionView::Base:0x124cb50>) on line #5 of app/views/items/_buy.html.erb:
2: Купить товар: 
3: <% remote_form_for(:buy, @item) do %>
4:   Количество: <%= text_field_tag('item[quantity]', 0, :size => 1) %><br>
5:   Склад: <%= select_storages('storages', @item) %>
6: <% end %>
7: </div>

    app/views/items/_buy.html.erb:5
    app/views/items/_buy.html.erb:3
    app/controllers/items_controller.rb:10:in `buy'
    app/controllers/items_controller.rb:5:in `buy'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:43:40) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:43:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m

ActionView::TemplateError (undefined method `storages' for #<Item:0x1b15a5c>) on line #5 of app/views/items/_buy.html.erb:
2: Купить товар: 
3: <% remote_form_for(:buy, @item) do %>
4:   Количество: <%= text_field_tag('item[quantity]', 0, :size => 1) %><br>
5:   Склад: <%= select_storages('storages', @item) %>
6: <% end %>
7: </div>

    app/helpers/items_helper.rb:22:in `select_storages'
    app/views/items/_buy.html.erb:5
    app/views/items/_buy.html.erb:3
    app/controllers/items_controller.rb:10:in `buy'
    app/controllers/items_controller.rb:5:in `buy'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (67.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:45:20) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:45:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (7.8ms)
Completed in 28ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:47:02) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;35;1mItem Load (2.0ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 127ms (View: 108, DB: 11) | 200 OK [http://localhost/operator]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#create (for 127.0.0.1 at 2010-05-29 13:47:07) [GET]
Rendering template within layouts/operator_layout
Rendering items/create
  [4;36;1mCatalogue Load (3.8ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_attribute_row (1.1ms)
Rendered items/_add_attribute_button (1.3ms)
Rendered item_periods/_create_button (21.5ms)
Rendered item_periods/_editable_list (40.1ms)
Rendered item_storages/_create_button (1.4ms)
Rendered item_storages/_editable_list (6.2ms)
Completed in 106ms (View: 99, DB: 4) | 200 OK [http://localhost/items/create]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemStoragesController#create (for 127.0.0.1 at 2010-05-29 13:47:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "create_index"=>"0", "_"=>""}
  [4;35;1mStorage Load (28.5ms)[0m   [0mSELECT * FROM "storages" ORDER BY name[0m
Rendered item_storages/_create (39.8ms)
Rendered item_storages/_create_button (0.6ms)
Completed in 47ms (View: 17, DB: 29) | 200 OK [http://localhost/item_storages/create?create_index=0]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#create (for 127.0.0.1 at 2010-05-29 13:50:24) [GET]
Rendering template within layouts/operator_layout
Rendering items/create
  [4;36;1mCatalogue Load (2.3ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_attribute_row (0.2ms)
Rendered items/_add_attribute_button (0.3ms)
Rendered item_periods/_create_button (0.3ms)
Rendered item_periods/_editable_list (0.7ms)
Rendered item_storages/_create_button (0.4ms)
Rendered item_storages/_editable_list (0.7ms)
Completed in 90ms (View: 86, DB: 3) | 200 OK [http://localhost/items/create]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:50:29) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:50:31) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (5.6ms)
Completed in 20ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:51:46) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 101, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:51:47) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (5.5ms)
Completed in 24ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:52:25) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:52:26) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (8.4ms)
Completed in 30ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:52:36) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:52:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (5.8ms)
Completed in 21ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:52:54) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:52:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (5.7ms)
Completed in 22ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:53:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (19.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (41.2ms)
Completed in 62ms (View: 22, DB: 22) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:53:32) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (2.0ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:53:34) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.7ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m
/!\ FAILSAFE /!\  Sat May 29 13:53:54 +0400 2010
  Status: 500 Internal Server Error
  /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/items_helper.rb:22: syntax error, unexpected ')', expecting '}'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:224:in `depend_on'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:136:in `require_dependency'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:126:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:120:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `helper'
    /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/application_controller.rb:5
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:425:in `load_missing_constant'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:80:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:92:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:90:in `dispatch'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:54:16) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:54:18) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy (7.8ms)
Completed in 29ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy/4]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:54:21) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 101, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:54:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.7ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:54:31) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:54:32) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.9ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 13:57:19) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (71.1ms)
Completed in 95ms (View: 74, DB: 3) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:25) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.9ms)
Completed in 34ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (20.6ms)
Completed in 41ms (View: 20, DB: 3) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (20.8ms)
Completed in 41ms (View: 20, DB: 3) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (15.2ms)
Completed in 32ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.5ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:27) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"0"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.4ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:28) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (67.8ms)
Completed in 82ms (View: 67, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (15.0ms)
Completed in 31ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.6ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (1.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (22.8ms)
Completed in 43ms (View: 22, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (15.6ms)
Completed in 31ms (View: 16, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:30) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.4ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 13:57:30) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy (14.5ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:11:03) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 130ms (View: 111, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (22.1ms)
Completed in 46ms (View: 24, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:10) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.8ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:11) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.4ms)
Completed in 99ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:12) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.6ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (1.3ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.4ms)
Completed in 43ms (View: 21, DB: 4) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (20.7ms)
Completed in 36ms (View: 20, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (17.3ms)
Completed in 32ms (View: 17, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.4ms)
Completed in 32ms (View: 16, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (68.6ms)
Completed in 85ms (View: 69, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.8ms)
Completed in 31ms (View: 16, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:14) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.5ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:14) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.9ms)
Completed in 30ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:11:14) [POST]
  Parameters: {"commit"=>"Купит\321\214", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storages"=>"storage 2", "_"=>"", "item"=>{"quantity"=>"1"}}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.3ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:35:18) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 68ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.5ms)
Completed in 32ms (View: 17, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:23) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.1ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:24) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:24) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:24) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.2ms)
Completed in 85ms (View: 16, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:24) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.9ms)
Completed in 31ms (View: 16, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:25) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.6ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:27) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.2ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (20.1ms)
Completed in 35ms (View: 20, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.0ms)
Completed in 30ms (View: 16, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:35:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:35:30) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.4ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.3ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.2ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 131ms (View: 108, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:06) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:37:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m

ActionView::TemplateError (undefined local variable or method `list' for #<ActionView::Base:0x591adc>) on line #3 of app/views/items/_buy_div.html.erb:
1: <div class="buy">
2: Купить товар: 
3: <% remote_form_for(:buy, @item, :url => {:action => list}) do %>
4:   Количество: <%= text_field_tag('quantity', 0, :size => 1) %><br>
5:   Склад: <%= select_storages('storage', @item) %>
6:   <%= submit_tag 'Купить'%>

    app/views/items/_buy_div.html.erb:3
    app/controllers/items_controller.rb:10:in `buy_div'
    app/controllers/items_controller.rb:5:in `buy_div'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:37) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 123ms (View: 103, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:37:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.8ms)
Completed in 34ms (View: 17, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:41) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 62ms (View: 44, DB: 9) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:42) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 76ms (View: 57, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:42) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (2.3ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:42) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 77ms (View: 57, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:42) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 49, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:37:42) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 101, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:38:38) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:38:40) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (71.4ms)
Completed in 88ms (View: 73, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:38:43) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:38:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.0ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:38:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (2.2ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 124ms (View: 102, DB: 11) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:38:59) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (18.9ms)
Completed in 40ms (View: 19, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:38:59) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:38:59) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (71.3ms)
Completed in 86ms (View: 71, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:39:00) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_div (6.0ms)
Completed in 23ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:39:00) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_div (5.7ms)
Completed in 24ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:39:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;36;1mItem Load (2.5ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.4ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 71ms (View: 49, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:40:08) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:40:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.9ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:40:12) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 119ms (View: 100, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:41:37) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.2ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.0ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.3ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:41:41) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;36;1mItemStorage Load (1.0ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_div (8.3ms)
Completed in 29ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy_div/2]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:46) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.6ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:47) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.5ms)
Completed in 32ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:47) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.4ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:48) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_div (9.1ms)
Completed in 30ms (View: 10, DB: 2) | 200 OK [http://localhost/items/buy_div/6]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:41:50) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 117ms (View: 99, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:41:56) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"6", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_div (5.7ms)
Completed in 21ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/6]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:00) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:42:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_div (6.2ms)
Completed in 22ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/4]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:03) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;35;1mItem Load (2.6ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.5ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.4ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 92ms (View: 66, DB: 15) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:42:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"5", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 5) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_div (5.7ms)
Completed in 20ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/5]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:07) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 117ms (View: 46, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:42:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_div (5.7ms)
Completed in 20ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/3]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:11) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 62ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:42:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"7", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_div (6.0ms)
Completed in 22ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/7]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:16) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 62ms (View: 44, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:42:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.3ms)
Completed in 30ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"5", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:42:37) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 49, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:43:24) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:43:25) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.4ms)
Completed in 32ms (View: 17, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:43:28) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 116ms (View: 98, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:44:01) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.6ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 48, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:44:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (18.7ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:44:04) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:19:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:45:03) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:45:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (22.5ms)
Completed in 47ms (View: 25, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:45:07) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "storage"=>"storage 2", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:19:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:45:31) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.2ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:45:33) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.9ms)
Completed in 45ms (View: 24, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:45:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.0ms)[0m   [0mPGError: ERROR: invalid input syntax for integer: "storage 2"
: SELECT * FROM "item_storages" WHERE (storage_id = E'storage 2' AND item_id = 1) LIMIT 1[0m

ActiveRecord::StatementInvalid (PGError: ERROR:  invalid input syntax for integer: "storage 2"
: SELECT * FROM "item_storages" WHERE (storage_id = E'storage 2' AND item_id = 1)  LIMIT 1):
  app/controllers/items_controller.rb:20:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (101.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:55:40) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:55:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.5ms)
Completed in 31ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:55:43) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"storage 2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.0ms)[0m   [0;1mPGError: ERROR: invalid input syntax for integer: "storage 2"
: SELECT * FROM "item_storages" WHERE (storage_id = E'storage 2' AND item_id = 1) LIMIT 1[0m

ActiveRecord::StatementInvalid (PGError: ERROR:  invalid input syntax for integer: "storage 2"
: SELECT * FROM "item_storages" WHERE (storage_id = E'storage 2' AND item_id = 1)  LIMIT 1):
  app/controllers/items_controller.rb:20:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (45.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:56:00) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 69ms (View: 49, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:56:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.1ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:56:04) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m

TypeError (String can't be coerced into Fixnum):
  app/controllers/items_controller.rb:23:in `-'
  app/controllers/items_controller.rb:23:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (92.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:56:20) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:56:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.0ms)
Completed in 33ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:56:25) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m

TypeError (String can't be coerced into Fixnum):
  app/controllers/items_controller.rb:23:in `-'
  app/controllers/items_controller.rb:23:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:57:18) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:57:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (8.8ms)
Completed in 25ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 14:58:23) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 63ms (View: 45, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 14:58:25) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.9ms)
Completed in 83ms (View: 16, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 14:58:28) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m

TypeError (String can't be coerced into Fixnum):
  app/controllers/items_controller.rb:23:in `-'
  app/controllers/items_controller.rb:23:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:00:13) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 103, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:00:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.1ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:17) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (23.1ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (11.8ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:17.777163', "quantity" = 98 WHERE "id" = 2[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mCOMMIT[0m
Completed in 83ms (View: 1, DB: 40) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.6ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.4ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
Completed in 49ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:33) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.0ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.6ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.4ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.5ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:33.417248', "quantity" = 88 WHERE "id" = 2[0m
  [4;35;1mSQL (2.0ms)[0m   [0mCOMMIT[0m
Completed in 63ms (View: 1, DB: 8) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.0ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.5ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:34.377600', "quantity" = 78 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 62ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:34.970731', "quantity" = 68 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 48ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:35) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.4ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:35.080284', "quantity" = 58 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Completed in 43ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:00:35) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:00:35.248995', "quantity" = 48 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 43ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:03:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"3", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_div (6.0ms)
Completed in 21ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:03:19) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"3", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = NULL AND item_id = 3) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/items_controller.rb:23:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:03:29) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 117ms (View: 100, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-29 15:04:02) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mSQL (25.1ms)[0m   [0;1mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;36;1mProperty Load (23.9ms)[0m   [0;1mSELECT * FROM "properties" WHERE ("properties".item_id = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 100ms (View: 33, DB: 52) | 200 OK [http://localhost/items/show/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:04) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:05.015221', "rating" = 52 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 31ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:05.232591', "rating" = 53 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 28ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:05.307560', "rating" = 54 WHERE "id" = 1[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
Completed in 27ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#minus (for 127.0.0.1 at 2010-05-29 15:04:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:05.822056', "rating" = 53 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 27ms (View: 1, DB: 3) | 200 OK [http://localhost/items/minus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#minus (for 127.0.0.1 at 2010-05-29 15:04:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:05.971835', "rating" = 52 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 29ms (View: 1, DB: 3) | 200 OK [http://localhost/items/minus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#minus (for 127.0.0.1 at 2010-05-29 15:04:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.6ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:06.157460', "rating" = 51 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 31ms (View: 1, DB: 3) | 200 OK [http://localhost/items/minus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:06.863508', "rating" = 52 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 27ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:06.986523', "rating" = 53 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 27ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.5ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.4ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:07.295653', "rating" = 54 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 77ms (View: 1, DB: 3) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#plus (for 127.0.0.1 at 2010-05-29 15:04:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.8ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItem Update (0.7ms)[0m   [0;1mUPDATE "items" SET "updated_at" = '2010-05-29 11:04:07.536777', "rating" = 55 WHERE "id" = 1[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
Completed in 42ms (View: 1, DB: 4) | 200 OK [http://localhost/items/plus/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:04:08) [GET]
  Parameters: {"catalogue_id"=>"1"}
  [4;36;1mItem Load (2.1ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'1') [0m
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'1') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Completed in 46ms (View: 32, DB: 6) | 200 OK [http://localhost/items/list?catalogue_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:04:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.6ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 122ms (View: 103, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:06:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 62ms (View: 45, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:06:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (21.3ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:06:33) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 65ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:09:48) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"7", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_div (6.0ms)
Completed in 20ms (View: 6, DB: 2) | 200 OK [http://localhost/items/buy_div/7]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:09:53) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.1ms)
Completed in 32ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:09:55) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:09:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 31ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:10:19) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.4ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:10:19.968039', "quantity" = 47 WHERE "id" = 2[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Completed in 97ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:12:17) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:12:19) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.2ms)
Completed in 34ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:22) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.2ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:22.901496', "quantity" = 45 WHERE "id" = 2[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:25) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:25.899202', "quantity" = 8 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 45ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.5ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:29.723527', "quantity" = 43 WHERE "id" = 2[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 67ms (View: 1, DB: 8) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:30) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:30.257445', "quantity" = 41 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 48ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:30) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:30.348664', "quantity" = 39 WHERE "id" = 2[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:30) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:30.466849', "quantity" = 37 WHERE "id" = 2[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:32) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:32.662387', "quantity" = 27 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 51ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:33) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:33.481609', "quantity" = 17 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 45ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:33) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:33.954900', "quantity" = 7 WHERE "id" = 2[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 100ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.7ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 65ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 52ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:35) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 49ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:35) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:12:38) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 102, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:12:40) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (2.2ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.5ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.6ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 69ms (View: 47, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:12:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (70.4ms)
Completed in 86ms (View: 70, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:44) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:44.804162', "quantity" = 6 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:45) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.0ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.6ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:45.683204', "quantity" = 5 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 65ms (View: 1, DB: 8) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:45) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:45.853989', "quantity" = 4 WHERE "id" = 2[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 105ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:45) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.7ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.6ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:45.937948', "quantity" = 3 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:46.065769', "quantity" = 2 WHERE "id" = 2[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 45ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.1ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:46.268987', "quantity" = 1 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 48ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 48ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.4ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 99ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:47) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:12:47) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 67ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:12:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (18.8ms)
Completed in 42ms (View: 19, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:52) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:52) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.0ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.8ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (1.6ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 69ms (View: 1, DB: 8) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:52) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.4ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 48ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:56) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:56.882149', "quantity" = 7 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:56) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.5ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:57.063040', "quantity" = 6 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 98ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:57.383695', "quantity" = 5 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:57.547017', "quantity" = 4 WHERE "id" = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.6ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:57.783600', "quantity" = 3 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 110ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.6ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:57.867066', "quantity" = 2 WHERE "id" = 1[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 48ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.9ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 11:12:58.008964', "quantity" = 1 WHERE "id" = 1[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 7) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:58) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.6ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 53ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:58) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:58) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.5ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 100ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:58) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.1ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.6ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 66ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:59) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.0ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.7ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.4ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 67ms (View: 1, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:59) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 104ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:12:59) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:13:00) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.1ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 121ms (View: 102, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:13:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.2ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 104ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.2ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.4ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:10) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.2ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:10) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 100ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 15:13:10) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 49ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 15:13:11) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 15:13:13) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.0ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 16:16:01) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:25: syntax error, unexpected kDO, expecting kEND
..."Нет в наличии." do |page|
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:26: syntax error, unexpected ')', expecting kDO_BLOCK
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:241: syntax error, unexpected $end, expecting kEND):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 16:18:59) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:26: syntax error, unexpected tSYMBEG, expecting kDO or '{' or '('
...html "buy#{item.id}", render :partial => 'buy_button'
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:46: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:57: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:64: syntax error, unexpected kEND, expecting $end):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (86.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 16:20:18) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:26: syntax error, unexpected tSYMBEG, expecting kDO or '{' or '('
...tml ("buy#{item.id}", render :partial => 'buy_button')
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:26: syntax error, unexpected ')', expecting kEND
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:46: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:57: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:74: syntax error, unexpected kDO_BLOCK, expecting kEND
    render(:update) do |page|
                      ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:77: syntax error, unexpected kEND, expecting $end):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:20:31) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `item' for #<ActionView::Base:0x12e155c>) on line #1 of app/views/items/_buy_button.html.erb:
1: <%content_tag(:span, link_to_remote("Купить", :update => "buy#{item.id}", 
2:                                       :url => {:action => :buy_div, :id => item.id}), 
3:                                       :class => 'inline-menu-item')%>

    app/views/items/_buy_button.html.erb:1
    app/views/items/list.html.erb:33
    app/views/items/list.html.erb:30:in `each'
    app/views/items/list.html.erb:30
    app/views/items/list.html.erb:2
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (63.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:21:24) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.8ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 131ms (View: 111, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:24:02) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
ERROR: compiling _run_erb_app47views47items47list46html46erb RAISED compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/list.html.erb:33: syntax error, unexpected tASSOC, expecting '}'
...r.concat(( render {:partial => 'buy_button', :id => item.id}...
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/list.html.erb:33: syntax error, unexpected ',', expecting '}'
...der {:partial => 'buy_button', :id => item.id} if @user == '...
                              ^
Function body:           def _run_erb_app47views47items47list46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat(( javascript_include_tag :defaults ).to_s); @output_buffer.concat "\n"
;  form_tag({:action => :list}, {:name => 'items_form'}) do ; @output_buffer.concat "\n<TABLE class = \"top\">\n  <tr><th> \320\233\321\203\321\207\321\210\320\270\320\265 \321\202\320\276\320\262\320\260\321\200\321\213:</th>\n  "


;  @bests.each do |best| ; @output_buffer.concat "\n    <td>"
; @output_buffer.concat(( link_to best.name, :action => :show, :id => best.id, :catalogue_id => params['catalogue_id']).to_s); @output_buffer.concat "</td>\n  "
;  end ; @output_buffer.concat "\n  </tr>\n</table>\n<TABLE class = \"list\">\n  <CAPTION>\n    \320\232\320\260\321\202\320\260\320\273\320\276\320\263 \321\202\320\276\320\262\320\260\321\200\320\276\320\262:\n    "





; @output_buffer.concat(( catalogues_list(params['catalogue_id'], 'catalogue_id',
      'javascript:document.items_form.submit();') ).to_s); @output_buffer.concat "\n  </CAPTION>\n  "

;  if @items.size == 0 ; @output_buffer.concat "\n    "
; @output_buffer.concat((  empty_list() ).to_s); @output_buffer.concat "\n  "
;  else ; @output_buffer.concat "\n    <THEAD>\n      <TR>\n        <TH>\320\235\320\260\320\267\320\262\320\260\320\275\320\270\320\265</TH>\n        "



;  if @inline_actions.size > 0  ; @output_buffer.concat "\n        <TH>\320\224\320\265\320\271\321\201\321\202\320\262\320\270\321\217</TH>\n        "

;  end ; @output_buffer.concat "\n        <th>\320\246\320\265\320\275\320\260</th>\n        <th>\320\232\320\276\320\273\320\270\321\207\320\265\321\201\321\202\320\262\320\276</th>\n      </TR>\n    </THEAD>\n    <TBODY>\n      "





;  @items.each do |item| ; @output_buffer.concat "\n      <TR>\n        <TD>"

; @output_buffer.concat(( item.name ).to_s); @output_buffer.concat "</TD>\n        <td id =\"buy"
; @output_buffer.concat((item.id).to_s); @output_buffer.concat "\">"; @output_buffer.concat(( inline_menu(item) ).to_s); @output_buffer.concat " "; @output_buffer.concat(( render {:partial => 'buy_button', :id => item.id} if @user == 'anonimus').to_s); @output_buffer.concat "</td>\n        <td>\n          "

; @output_buffer.concat(( item.price ? "#{item.price} руб." : "Уточните у менеджера" ).to_s); @output_buffer.concat " \n        </td>\n        <td>\n          <span id=\"quantity"


; @output_buffer.concat((item.id).to_s); @output_buffer.concat "\">"; @output_buffer.concat(( item.quantity or "Нет в наличии").to_s); @output_buffer.concat "</span>\n        </td>\n      </TR>\n      "


;  end ; @output_buffer.concat "\n    </TBODY>\n  "

;  end ; @output_buffer.concat "\n</TABLE>\n"

;  end ; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/list.html.erb:48:in `compile!'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:61:in `compile'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:28:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/template.rb:194:in `render_template'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:260:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:343:in `_render_with_layout'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:257:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1241:in `render_for_file'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:937:in `render_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1317:in `default_render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1323:in `perform_action_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/list.html.erb:33: syntax error, unexpected tASSOC, expecting '}'
...r.concat(( render {:partial => 'buy_button', :id => item.id}...
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/list.html.erb:33: syntax error, unexpected ',', expecting '}'
...der {:partial => 'buy_button', :id => item.id} if @user == '...
                              ^) on line #33 of app/views/items/list.html.erb:
30:       <% @items.each do |item| %>
31:       <TR>
32:         <TD><%= item.name %></TD>
33:         <td id ="buy<%=item.id%>"><%= inline_menu(item) %> <%= render {:partial => 'buy_button', :id => item.id} if @user == 'anonimus'%></td>
34:         <td>
35:           <%= item.price ? "#{item.price} руб." : "Уточните у менеджера" %> 
36:         </td>

    app/views/items/list.html.erb:48:in `compile!'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (45.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:24:18) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (1.1ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (1.2ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 77ms (View: 57, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:25:05) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.8ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 72ms (View: 53, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:08) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (100.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (102.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (96.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (39.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (98.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:42) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:25:42) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (95.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (47.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (100.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:38) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (92.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:39) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:42) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:43) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:43) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (48.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:28:43) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (98.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:29:41) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.9ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.9ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 77ms (View: 55, DB: 13) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:29:43) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (2.2ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.5ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (1.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.6ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Completed in 150ms (View: 124, DB: 13) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:29:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:29:45) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:29:45) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (96.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 16:31:20) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.6ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 82ms (View: 61, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:31:23) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (98.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:31:23) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (39.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:31:23) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (47.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:31:23) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (97.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 16:32:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:49:13) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.9ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (1.0ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.6ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 128ms (View: 108, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:49:14) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:49:25) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.1ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.7ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.6ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 70ms (View: 50, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:49:26) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (93.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:49:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:49:28) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (92.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:52:26) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.7ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 70ms (View: 50, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:52:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:52:28) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "_"=>""}

ActiveRecord::RecordNotFound (Couldn't find Item without an ID):
  app/controllers/items_controller.rb:7:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (93.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:55:55) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.2ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.8ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 78ms (View: 58, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:55:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.0ms)
Completed in 32ms (View: 18, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 17:56:03) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 13:56:03.071850', "quantity" = 8 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.5ms)

NoMethodError (undefined method `replace_html' for #<ActionView::Base:0x1ba7a38>):
  app/controllers/items_controller.rb:27:in `buy'
  app/controllers/items_controller.rb:25:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:56:31) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 127ms (View: 107, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:56:33) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 17:56:35) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (1.3ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 13:56:35.215109', "quantity" = 98 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m

ActionController::DoubleRenderError (Can only render or redirect once per action):
  app/controllers/items_controller.rb:29:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 17:58:07) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:28: syntax error, unexpected kOR, expecting ')'
...}", item_storage[:quantity] or "Нет в наличии.")
                              ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:28: syntax error, unexpected ')', expecting kEND
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:243: syntax error, unexpected $end, expecting kEND):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:58:18) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.4ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 71ms (View: 51, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:58:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.7ms)
Completed in 31ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 17:58:22) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 13:58:22.599893', "quantity" = 6 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 101ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 17:58:54) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.5ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.7ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 74ms (View: 54, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 17:58:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.2ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 17:58:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 13:58:57.739425', "quantity" = 96 WHERE "id" = 2[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 46ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:00:14) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.2ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.9ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (1.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 73ms (View: 52, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:00:16) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (16.6ms)
Completed in 32ms (View: 16, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:00:19) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.4ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
Rendered items/_buy_button (0.4ms)
Completed in 47ms (View: 2, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:01:11) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.3ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 70ms (View: 50, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:01:12) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.5ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:01:14) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.5ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:01:14.582331', "quantity" = 4 WHERE "id" = 1[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 50ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:02:56) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 124ms (View: 105, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:02:58) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (1.0ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (16.5ms)
Completed in 32ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:03:00) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.6ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.6ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:03:00.945576', "quantity" = 2 WHERE "id" = 1[0m
  [4;35;1mSQL (1.8ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 47ms (View: 2, DB: 7) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:03:40) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 131ms (View: 51, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:03:42) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.6ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:03:44) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
Rendered items/_buy_button (0.4ms)
Completed in 108ms (View: 2, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:07:23) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 49, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:07:25) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.0ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:07:28) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.8ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:07:28.820296', "quantity" = 94 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 48ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:07:30) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 67ms (View: 50, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:07:31) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.8ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (70.5ms)
Completed in 85ms (View: 70, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:07:34) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:07:34.502777', "quantity" = 0 WHERE "id" = 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.7ms)
Completed in 47ms (View: 3, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:07:36) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.1ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 67ms (View: 48, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-29 18:07:54) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;35;1mProperty Load (0.6ms)[0m   [0mSELECT * FROM "properties" WHERE ("properties".item_id = 1) [0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 50ms (View: 30, DB: 4) | 200 OK [http://localhost/items/show/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:08:37) [GET]
  Parameters: {"catalogue_id"=>"1"}
  [4;35;1mItem Load (2.2ms)[0m   [0mSELECT * FROM "items" WHERE (catalogue_id = E'1') [0m
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE (catalogue_id = E'1') ORDER BY rating_cat DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 46ms (View: 32, DB: 6) | 200 OK [http://localhost/items/list?catalogue_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:08:41) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.8ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 124ms (View: 105, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:12:19) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:12:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.3ms)
Completed in 35ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:12:23) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (1.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:12:23.195304', "quantity" = 92 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 49ms (View: 2, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:13:01) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 48, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:13:03) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.8ms)
Completed in 87ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:13:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.4ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:13:06.153858', "quantity" = 90 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 44ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:14:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.5ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 48, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:14:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.9ms)
Completed in 30ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:14:52) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:14:52.662003', "quantity" = 88 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 44ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:16:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.5ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (68.8ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 139ms (View: 120, DB: 11) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:16:22) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (1.0ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (20.9ms)
Completed in 42ms (View: 21, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:16:25) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:16:25.660333', "quantity" = 87 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Completed in 44ms (View: 1, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:24:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (1.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 134ms (View: 115, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:24:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.1ms)
Completed in 28ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:24:53) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.2ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:24:53.442359', "quantity" = 85 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 44ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:25:26) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 134ms (View: 116, DB: 11) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:25:28) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (13.9ms)
Completed in 32ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:25:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.4ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:25:31.532669', "quantity" = 83 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 45ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:26:36) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.7ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 69ms (View: 50, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:26:38) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.0ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:26:39) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.6ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 105ms (View: 2, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:27:05) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (2.1ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:27:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.4ms)
Completed in 32ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:27:10) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:27:10.363421', "quantity" = 81 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 110ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:29:01) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 64ms (View: 46, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:29:03) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (1.1ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (21.9ms)
Completed in 43ms (View: 22, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:29:06) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.7ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.7ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.5ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:29:06.075193', "quantity" = 79 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 48ms (View: 2, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:35:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (2.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 78ms (View: 57, DB: 12) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:35:29) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (76.6ms)
Completed in 96ms (View: 81, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:35:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:35:31.479686', "quantity" = 77 WHERE "id" = 2[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 48ms (View: 3, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:37:08) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:37:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.9ms)
Completed in 98ms (View: 18, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:37:12) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.5ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:37:12.152825', "quantity" = 75 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 44ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:37:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (15.1ms)
Completed in 34ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:37:17) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"3", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.4ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.5ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.9ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:37:17.158028', "quantity" = 72 WHERE "id" = 2[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 107ms (View: 63, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:38:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `item' for #<ActionView::Base:0x2a31e28>) on line #1 of app/views/items/_buy_button.html.erb:
1: <%= inline_menu(item) %> <%=content_tag(:span, link_to_remote("Купить", :update => "buy#{@id}", 
2:                                       :url => {:action => :buy_div, :id => @id}), 
3:                                       :class => 'inline-menu-item')%>

    app/views/items/_buy_button.html.erb:1
    app/views/items/list.html.erb:35
    app/views/items/list.html.erb:30:in `each'
    app/views/items/list.html.erb:30
    app/views/items/list.html.erb:2
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (57.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:40:08) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.8ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 143ms (View: 124, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:40:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.1ms)
Completed in 28ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:40:12) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:40:12.538093', "quantity" = 70 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.3ms)

TypeError (can't convert String into Array):
  app/controllers/items_controller.rb:28:in `+'
  app/controllers/items_controller.rb:28:in `buy'
  app/controllers/items_controller.rb:26:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (107.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:40:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.6ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:40:13.927338', "quantity" = 68 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.3ms)

TypeError (can't convert String into Array):
  app/controllers/items_controller.rb:28:in `+'
  app/controllers/items_controller.rb:28:in `buy'
  app/controllers/items_controller.rb:26:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:40:14) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.9ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:40:14.346219', "quantity" = 66 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)

TypeError (can't convert String into Array):
  app/controllers/items_controller.rb:28:in `+'
  app/controllers/items_controller.rb:28:in `buy'
  app/controllers/items_controller.rb:26:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:40:24) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (1.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:40:25) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.0ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.5ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:40:27) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:40:27.496268', "quantity" = 64 WHERE "id" = 2[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.5ms)
Completed in 46ms (View: 3, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:41:12) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 129ms (View: 107, DB: 14) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:41:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (13.9ms)
Completed in 33ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:41:16) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:41:16.837455', "quantity" = 62 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 45ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-29 18:43:16) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;35;1mProperty Load (0.6ms)[0m   [0mSELECT * FROM "properties" WHERE ("properties".item_id = 1) [0m
  [4;36;1mCatalogue Load (0.8ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 113ms (View: 94, DB: 4) | 200 OK [http://localhost/items/show/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:44:11) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.3ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:44:13) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.2ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 43ms (View: 2, DB: 4) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:44:14) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (13.8ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:44:16) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:44:16.325402', "quantity" = 60 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 111ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:46:25) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 51, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:46:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.4ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:46:29) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"20", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:46:29.954982', "quantity" = 40 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 47ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:46:38) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.0ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:46:43) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"20", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (1.1ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:46:43.347382', "quantity" = 20 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 46ms (View: 2, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:46:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (80.9ms)
Completed in 100ms (View: 81, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:46:46) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"20", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:46:46.709451', "quantity" = 0 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 46ms (View: 3, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:46:47) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (8.1ms)
Completed in 22ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:46:50) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"0", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = NULL AND item_id = 1) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.quantity):
  app/controllers/items_controller.rb:23:in `buy'
  app/controllers/items_controller.rb:17:in `buy'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (103.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:46:53) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.9ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.6ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (6.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.8ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 270ms (View: 242, DB: 20) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:47:20) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (12.6ms)
Completed in 33ms (View: 13, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:47:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 129ms (View: 112, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:47:56) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (7.9ms)
Completed in 22ms (View: 8, DB: 1) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:48:08) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 64ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:48:09) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (12.2ms)
Completed in 33ms (View: 13, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:48:35) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (2.0ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:48:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (8.3ms)
Completed in 24ms (View: 9, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:48:58) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (2.3ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.6ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 11) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:48:59) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_div (8.0ms)
Completed in 23ms (View: 8, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:50:01) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.9ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 69ms (View: 51, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:50:02) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.3ms)
Completed in 30ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:50:16) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1000", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (1.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.4ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.4ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.6ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:50:16.499638', "quantity" = -900 WHERE "id" = 2[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.4ms)
Completed in 104ms (View: 3, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:50:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (1.1ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 48, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:50:35) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.5ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:52:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.4ms)
Completed in 30ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:52:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.4ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.2ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:52:31.217690', "quantity" = 0 WHERE "id" = 1[0m
  [4;35;1mSQL (0.9ms)[0m   [0mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 46ms (View: 2, DB: 5) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:53:03) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (2.1ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 124ms (View: 106, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:54:50) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (2.0ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 46, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:54:52) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (75.8ms)
Completed in 90ms (View: 75, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:54:56) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"1000", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_button (0.3ms)
Completed in 23ms (View: 2, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:55:16) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 31ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:55:21) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"110", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_button (0.3ms)
Completed in 22ms (View: 2, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#show (for 127.0.0.1 at 2010-05-29 18:55:54) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT min("items".rating) AS min_rating FROM "items" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT min("items".rating_cat) AS min_rating_cat FROM "items" [0m
Rendering template within layouts/operator_layout
Rendering items/show
  [4;35;1mProperty Load (0.6ms)[0m   [0mSELECT * FROM "properties" WHERE ("properties".item_id = 1) [0m
  [4;36;1mCatalogue Load (0.7ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Completed in 47ms (View: 28, DB: 4) | 200 OK [http://localhost/items/show/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:56:21) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 49, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:56:23) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.7ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:56:26) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"100", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (1.4ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.7ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.4ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.4ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.5ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:56:26.207640', "quantity" = 0 WHERE "id" = 2[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
Rendered items/_buy_button (0.3ms)
Completed in 111ms (View: 2, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:56:28) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (14.3ms)
Completed in 29ms (View: 14, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:56:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"110", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_button (0.3ms)
Completed in 24ms (View: 2, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:56:34) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 18:56:51) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 67ms (View: 49, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:56:54) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.0ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 18:56:57) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"100", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Exists (0.5ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (0.5ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (0.3ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-29 14:56:57.581834', "quantity" = 0 WHERE "id" = 2[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
Completed in 108ms (View: 4, DB: 6) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 18:57:07) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (15.3ms)
Completed in 30ms (View: 15, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 19:12:19) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:48: syntax error, unexpected ')', expecting ']'
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:49: syntax error, unexpected tIDENTIFIER, expecting kDO or '{' or '('
        render :text => h item_storage.quantity
                                      ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:67: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:78: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:85: syntax error, unexpected kEND, expecting $end):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 19:12:37) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:49: syntax error, unexpected tIDENTIFIER, expecting kDO or '{' or '('
        render :text => h item_storage.quantity
                                      ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:67: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:78: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:85: syntax error, unexpected kEND, expecting $end):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (99.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-29 19:12:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:49: syntax error, unexpected tIDENTIFIER, expecting kDO or '{' or '('
        render :text => h item_storage.quantity
                                      ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:67: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:78: syntax error, unexpected kDO_BLOCK, expecting kEND
      wants.js do 
                 ^
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:85: syntax error, unexpected kEND, expecting $end):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:13:04) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (2.4ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 65ms (View: 47, DB: 11) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 19:13:06) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.4ms)
Completed in 35ms (View: 18, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:13:12) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (2.6ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 73ms (View: 54, DB: 11) | 200 OK [http://localhost/items/list/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:13:14) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (2.0ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 125ms (View: 107, DB: 10) | 200 OK [http://localhost/items/list/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:14:17) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 48, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 19:14:19) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (17.4ms)
Completed in 35ms (View: 17, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:14:33) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.9ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 182ms (View: 161, DB: 13) | 200 OK [http://localhost/items/list/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:17:10) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 63ms (View: 46, DB: 10) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 19:17:12) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.7ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (78.0ms)
Completed in 95ms (View: 79, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:17:15) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItemStorage Load (2.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 14ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:17:16) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"null", "_"=>""}
  [4;36;1mItemStorage Load (0.0ms)[0m   [0;1mPGError: ERROR: invalid input syntax for integer: "null"
: SELECT * FROM "item_storages" WHERE (storage_id = E'null' AND item_id = E'1') LIMIT 1[0m

ActiveRecord::StatementInvalid (PGError: ERROR:  invalid input syntax for integer: "null"
: SELECT * FROM "item_storages" WHERE (storage_id = E'null' AND item_id = E'1')  LIMIT 1):
  app/controllers/items_controller.rb:46:in `buy_storage'
  app/controllers/items_controller.rb:44:in `buy_storage'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:17:49) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 133ms (View: 115, DB: 10) | 200 OK [http://localhost/items/list]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 19:17:50) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (16.4ms)
Completed in 33ms (View: 18, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:17:53) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItemStorage Load (2.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 14ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:17:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItemStorage Load (2.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-29 19:21:44) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "catalogue_id"=>""}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.6ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 131ms (View: 112, DB: 11) | 200 OK [http://localhost/items/list]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 19:21:55) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (1.2ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
Rendered items/_buy_div (17.0ms)
Completed in 41ms (View: 20, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:21:57) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItemStorage Load (2.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 19:22:00) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItemStorage Load (3.9ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 18ms (View: 1, DB: 4) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 19:22:04) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"10", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 2' AND "storages".id <> 2) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.5ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.3ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 2 AND "item_storages".id <> 2) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.5ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-29 15:22:04.625776', "quantity" = 90 WHERE "id" = 2[0m
  [4;35;1mSQL (1.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
Completed in 112ms (View: 4, DB: 7) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-29 20:51:24) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.9ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-29 20:51:27) [POST]
  Parameters: {"authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItemStorage Load (2.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 17ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-29 20:51:31) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"99", "authenticity_token"=>"9Am1uQC3jOfqf/MLVF3bJrh1+CZPciSUKlbEbXrRM6s=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_button (0.3ms)
Completed in 22ms (View: 2, DB: 2) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-30 23:18:48) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (110.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (24.6ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (2.2ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (26.4ms)
  [4;35;1mSQL (21.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (14.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.5ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 646ms (View: 336, DB: 180) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:18:53) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"6", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 6) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_div (24.2ms)
Completed in 41ms (View: 27, DB: 2) | 200 OK [http://localhost/items/buy_div/6]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:18:55) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (9.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (60.1ms)
Completed in 74ms (View: 51, DB: 11) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:18:58) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"4", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_div (6.4ms)
Completed in 22ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/4]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:18:58) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"5", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 5) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Rendered items/_buy_div (6.2ms)
Completed in 21ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/5]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:19:00) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"7", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 7) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_div (5.8ms)
Completed in 20ms (View: 6, DB: 1) | 200 OK [http://localhost/items/buy_div/7]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:19:00) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"2", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 2) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_div (5.8ms)
Completed in 20ms (View: 6, DB: 1) | 200 OK [http://localhost/items/buy_div/2]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:19:02) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"3", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 3) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_div (6.2ms)
Completed in 22ms (View: 7, DB: 2) | 200 OK [http://localhost/items/buy_div/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-30 23:19:08) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 121ms (View: 50, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-30 23:19:23) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
Rendered items/_buy_div (14.8ms)
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-30 23:19:31) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;36;1mItemStorage Load (2.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-30 23:19:33) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItemStorage Load (3.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 20ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-30 23:19:36) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 50, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m
/!\ FAILSAFE /!\  Mon May 31 00:09:30 +0400 2010
  Status: 500 Internal Server Error
  /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/helpers/items_helper.rb:35: syntax error, unexpected ',', expecting kEND
    end.join), selected
              ^
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:224:in `depend_on'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:136:in `require_dependency'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:126:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:120:in `helper'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/helpers.rb:115:in `helper'
    /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/application_controller.rb:5
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_without_new_constant_marking'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:380:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:379:in `load_file'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:259:in `require_or_load'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:425:in `load_missing_constant'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:80:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:92:in `const_missing'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:90:in `dispatch'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:10:01) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (1.4ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.8ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (4.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (1.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.7ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (2.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (1.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (1.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (2.5ms)
  [4;36;1mSQL (1.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (1.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (11.1ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 161ms (View: 126, DB: 27) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:10:04) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m

NoMethodError (undefined method `select_storages' for #<ItemsController:0x1b0ee00>):
  app/controllers/items_controller.rb:10:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (74.0ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:11:37) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.5ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 125ms (View: 107, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:11:39) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m

NoMethodError (undefined method `h' for #<ItemsController:0x1a30ed4>):
  app/controllers/items_controller.rb:277:in `select_storages'
  app/controllers/items_controller.rb:273:in `select_storages'
  app/controllers/items_controller.rb:10:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:12:00) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.4ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 178ms (View: 159, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:12:01) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"4", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.9ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m

NoMethodError (undefined method `select_tag' for #<ItemsController:0x1953098>):
  app/controllers/items_controller.rb:273:in `select_storages'
  app/controllers/items_controller.rb:10:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (109.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:12:08) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.8ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (0.9ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (1.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 47, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:12:10) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m

NoMethodError (undefined method `select_tag' for #<ItemsController:0x1931588>):
  app/controllers/items_controller.rb:273:in `select_storages'
  app/controllers/items_controller.rb:10:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (93.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ApplicationController#list (for 127.0.0.1 at 2010-05-31 00:22:28) [GET]
  Parameters: {"user_name"=>"anonimus"}

SyntaxError (/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:285: syntax error, unexpected ')', expecting kEND
      end.join + "\n</select>"), selected
                               ^):
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:22:36) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.4ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.3ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.5ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.5ms)
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 263ms (View: 114, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:22:38) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m

NameError (undefined local variable or method `selected' for #<ItemsController:0x1ae49ac>):
  app/controllers/items_controller.rb:285:in `select_storages'
  app/controllers/items_controller.rb:10:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:23:57) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 127ms (View: 108, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:23:59) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;35;1mItem Load (0.7ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = 1 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.8ms)
Completed in 34ms (View: 5, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:24:08) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (1.7ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.0ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (2.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 125ms (View: 106, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:25:27) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.5ms)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 68ms (View: 50, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:25:29) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 1 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.1ms)
Completed in 84ms (View: 2, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:25:57) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.2ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.4ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 74ms (View: 51, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:25:58) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 1 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.0ms)
Completed in 31ms (View: 2, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:26:54) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (2.0ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 71ms (View: 50, DB: 11) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:26:56) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 1 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.8ms)
Completed in 34ms (View: 5, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 00:27:35) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (1.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 127ms (View: 107, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 00:27:37) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 1 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.9ms)
Completed in 33ms (View: 5, DB: 3) | 200 OK [http://localhost/items/buy_div/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 00:27:40) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItemStorage Load (2.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 00:27:43) [POST]
  Parameters: {"authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItemStorage Load (2.5ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 16ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-31 00:27:48) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"rFW1IQ8hYSGC5Bq789X8hwWza8n4USM4kBb+4FQHxnw=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.8ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (29.2ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (10.8ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (1.1ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-30 20:27:48.124795', "quantity" = 8 WHERE "id" = 1[0m
  [4;35;1mSQL (0.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
Completed in 89ms (View: 4, DB: 46) | 200 OK [http://localhost/items/buy/1]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 19:53:37) [GET]
  Parameters: {"user_name"=>"operator"}
  [4;36;1mItem Load (133.2ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (23.1ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (2.0ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
  [4;35;1mSQL (4.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.5ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (1.0ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.9ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 517ms (View: 238, DB: 170) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 19:53:49) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.1ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.9ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 67ms (View: 49, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 19:53:50) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "pushed"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (8.8ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.4ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 2 AND item_id = 1) LIMIT 1[0m
ERROR: compiling _run_erb_app47views47items47_buy_div46html46erb_locals_buy_div_object RAISED compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:15: syntax error, unexpected ':', expecting ')'
...t(( button_to 'Отмена' :url => {:action => :list, :pus...
                              ^
Function body:           def _run_erb_app47views47items47_buy_div46html46erb_locals_buy_div_object(local_assigns)
            old_output_buffer = output_buffer;object = local_assigns[:object];buy_div = local_assigns[:buy_div];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<div class=\"buy\">\n\320\232\321\203\320\277\320\270\321\202\321\214 \321\202\320\276\320\262\320\260\321\200: \n"

;  remote_form_for('buy', :url => {:action => :buy, :id => params[:id]}) do ; @output_buffer.concat "\n  \320\232\320\276\320\273\320\270\321\207\320\265\321\201\321\202\320\262\320\276: "
; @output_buffer.concat(( text_field_tag('quantity', 0, :size => 1) ).to_s); @output_buffer.concat "<br>\n  \320\241\320\272\320\273\320\260\320\264: "
; @output_buffer.concat(( @select_storages ).to_s); @output_buffer.concat "<br>\n  \320\235\320\260 \321\201\320\272\320\273\320\260\320\264\320\265: <span id='buy_storage'>"
; @output_buffer.concat(( @count ).to_s); @output_buffer.concat "</span>\n  "
; @output_buffer.concat(( observe_field 'storage', 
                    :update => 'buy_storage', 
                    :frequency => 0.5, 
                    :url => {:action => 'buy_storage', :id => @item.id}, 
                    :with => 'storage' ).to_s); @output_buffer.concat "\n  <br>\n  "

; @output_buffer.concat(( submit_tag 'Купить').to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer.concat(( button_to 'Отмена' :url => {:action => :list, :pushed => @item.id} ).to_s); @output_buffer.concat "\n</div>"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:19:in `compile!'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:61:in `compile'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:28:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:20:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:26:in `benchmark'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:26:in `benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:19:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/template.rb:194:in `render_template'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:44:in `render_partial'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/partials.rb:184:in `render_partial'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:262:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:964:in `render_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:16:in `buy_div'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:135:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:135:in `custom'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:179:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:179:in `respond'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:173:in `each'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:173:in `respond'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:107:in `respond_to'
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:5:in `buy_div'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `perform_action_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:15: syntax error, unexpected ':', expecting ')'
...t(( button_to 'Отмена' :url => {:action => :list, :pus...
                              ^) on line #15 of app/views/items/_buy_div.html.erb:
12:   <br>
13:   <%= submit_tag 'Купить'%>
14: <% end %>
15: <%= button_to 'Отмена' :url => {:action => :list, :pushed => @item.id} %>
16: </div>

    app/views/items/_buy_div.html.erb:19:in `compile!'
    app/controllers/items_controller.rb:16:in `buy_div'
    app/controllers/items_controller.rb:5:in `buy_div'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.2ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 19:55:30) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.7ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.4ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 124ms (View: 106, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 19:55:32) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "pushed"=>"1", "_"=>""}
  [4;36;1mItem Load (0.8ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.7ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.2ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 2 AND item_id = 1) LIMIT 1[0m
ERROR: compiling _run_erb_app47views47items47_buy_div46html46erb_locals_buy_div_object RAISED compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:15: syntax error, unexpected ':', expecting ')'
...t(( button_to 'Отмена' :url => {:action => 'list', :pu...
                              ^
Function body:           def _run_erb_app47views47items47_buy_div46html46erb_locals_buy_div_object(local_assigns)
            old_output_buffer = output_buffer;object = local_assigns[:object];buy_div = local_assigns[:buy_div];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<div class=\"buy\">\n\320\232\321\203\320\277\320\270\321\202\321\214 \321\202\320\276\320\262\320\260\321\200: \n"

;  remote_form_for('buy', :url => {:action => :buy, :id => params[:id]}) do ; @output_buffer.concat "\n  \320\232\320\276\320\273\320\270\321\207\320\265\321\201\321\202\320\262\320\276: "
; @output_buffer.concat(( text_field_tag('quantity', 0, :size => 1) ).to_s); @output_buffer.concat "<br>\n  \320\241\320\272\320\273\320\260\320\264: "
; @output_buffer.concat(( @select_storages ).to_s); @output_buffer.concat "<br>\n  \320\235\320\260 \321\201\320\272\320\273\320\260\320\264\320\265: <span id='buy_storage'>"
; @output_buffer.concat(( @count ).to_s); @output_buffer.concat "</span>\n  "
; @output_buffer.concat(( observe_field 'storage', 
                    :update => 'buy_storage', 
                    :frequency => 0.5, 
                    :url => {:action => 'buy_storage', :id => @item.id}, 
                    :with => 'storage' ).to_s); @output_buffer.concat "\n  <br>\n  "

; @output_buffer.concat(( submit_tag 'Купить').to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer.concat(( button_to 'Отмена' :url => {:action => 'list', :pushed => @item.id} ).to_s); @output_buffer.concat "\n</div>"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:19:in `compile!'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:61:in `compile'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:28:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:20:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:26:in `benchmark'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:26:in `benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:19:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/template.rb:194:in `render_template'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable_partial.rb:44:in `render_partial'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/partials.rb:184:in `render_partial'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:262:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:964:in `render_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:16:in `buy_div'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:135:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:135:in `custom'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:179:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:179:in `respond'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:173:in `each'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:173:in `respond'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/mime_responds.rb:107:in `respond_to'
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/controllers/items_controller.rb:5:in `buy_div'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1322:in `perform_action_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/reloader.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/static.rb:31:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/rails/rack/log_tailer.rb:17:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
/opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
/opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
/opt/local/lib/ruby/gems/1.8/gems/rails-2.3.2/lib/commands/server.rb:111
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/Users/MichaelKostekchuk/Documents/Workspace/msiu/4sem/luck-va/shop_4sem/app/views/items/_buy_div.html.erb:15: syntax error, unexpected ':', expecting ')'
...t(( button_to 'Отмена' :url => {:action => 'list', :pu...
                              ^) on line #15 of app/views/items/_buy_div.html.erb:
12:   <br>
13:   <%= submit_tag 'Купить'%>
14: <% end %>
15: <%= button_to 'Отмена' :url => {:action => 'list', :pushed => @item.id} %>
16: </div>

    app/views/items/_buy_div.html.erb:19:in `compile!'
    app/controllers/items_controller.rb:16:in `buy_div'
    app/controllers/items_controller.rb:5:in `buy_div'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (48.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 19:56:12) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (1.0ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.1ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 69ms (View: 49, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 19:56:14) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "pushed"=>"1", "_"=>""}
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (1.0ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;35;1mStorage Load (0.3ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = 2 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (2.9ms)
Completed in 47ms (View: 7, DB: 4) | 200 OK [http://localhost/items/buy_div/1?pushed=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 19:56:16) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItemStorage Load (2.5ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 16ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-31 19:56:19) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItem Load (0.6ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.8ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;36;1mStorage Exists (28.3ms)[0m   [0;1mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mCatalogue Load (10.4ms)[0m   [0;1mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;35;1mCatalogue Exists (1.1ms)[0m   [0mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Exists (0.3ms)[0m   [0;1mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Update (0.4ms)[0m   [0mUPDATE "item_storages" SET "updated_at" = '2010-05-31 15:56:20.078488', "quantity" = 6 WHERE "id" = 1[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
Completed in 88ms (View: 4, DB: 44) | 200 OK [http://localhost/items/buy/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 19:56:23) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "pushed"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.7ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.5ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = 2 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.0ms)
Completed in 30ms (View: 2, DB: 3) | 200 OK [http://localhost/items/buy_div/1?pushed=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 19:56:24) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItemStorage Load (2.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 19:56:26) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"2", "_"=>""}
  [4;35;1mItemStorage Load (2.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = E'2' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 19:56:29) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"4", "pushed"=>"4", "_"=>""}
  [4;36;1mItem Load (0.7ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 4) [0m
  [4;35;1mItemStorage Load (0.6ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
  [4;36;1mItemStorage Load (0.4ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = NULL AND item_id = 4) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.quantity):
  app/controllers/items_controller.rb:15:in `buy_div'
  app/controllers/items_controller.rb:5:in `buy_div'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 19:56:56) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;35;1mItem Load (1.8ms)[0m   [0mSELECT * FROM "items" [0m
  [4;36;1mItem Load (0.9ms)[0m   [0;1mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;35;1mCatalogue Load (1.0ms)[0m   [0mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.4ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.3ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.5ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 66ms (View: 48, DB: 10) | 200 OK [http://localhost/anonimus]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#list (for 127.0.0.1 at 2010-05-31 20:01:42) [GET]
  Parameters: {"user_name"=>"anonimus"}
  [4;36;1mItem Load (2.1ms)[0m   [0;1mSELECT * FROM "items" [0m
  [4;35;1mItem Load (1.5ms)[0m   [0mSELECT * FROM "items" ORDER BY rating DESC LIMIT 3[0m
Rendering template within layouts/operator_layout
Rendering items/list
  [4;36;1mCatalogue Load (1.1ms)[0m   [0;1mSELECT * FROM "catalogues" ORDER BY name[0m
Rendered items/_buy_button (1.0ms)
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 3) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 3) [0m
Rendered items/_buy_button (0.4ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;35;1mItemPeriod Load (0.2ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 2) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 2) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 7) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 7) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 6) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 6) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;36;1mItemPeriod Load (0.3ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 1) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;36;1mItemStorage Load (0.3ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.3ms)
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;36;1mItemPeriod Load (0.2ms)[0m   [0;1mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 4) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 4) [0m
Rendered items/_buy_button (0.3ms)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;35;1mItemPeriod Load (0.3ms)[0m   [0mSELECT * FROM "item_periods" WHERE ("item_periods".item_id = 5) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 5) [0m
Completed in 142ms (View: 114, DB: 12) | 200 OK [http://localhost/anonimus]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_div (for 127.0.0.1 at 2010-05-31 20:01:44) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "pushed"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.6ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mStorage Load (0.6ms)[0m   [0mSELECT * FROM "storages" WHERE ("storages"."id" = 2) [0m
  [4;36;1mStorage Load (0.2ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mItemStorage Load (0.4ms)[0m   [0mSELECT * FROM "item_storages" WHERE (storage_id = 2 AND item_id = 1) LIMIT 1[0m
Rendered items/_buy_div (1.9ms)
Completed in 36ms (View: 5, DB: 3) | 200 OK [http://localhost/items/buy_div/1?pushed=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy_storage (for 127.0.0.1 at 2010-05-31 20:01:48) [POST]
  Parameters: {"authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;36;1mItemStorage Load (2.2ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = E'1') LIMIT 1[0m
Completed in 13ms (View: 1, DB: 3) | 200 OK [http://localhost/items/buy_storage/1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET client_min_messages TO 'notice'[0m


Processing ItemsController#buy (for 127.0.0.1 at 2010-05-31 20:01:51) [POST]
  Parameters: {"commit"=>"Купит\321\214", "quantity"=>"2", "authenticity_token"=>"qK57Gx2MyXARjP5TlaLgap7Iv6rU/OM01cX8rwE2/BY=", "id"=>"1", "storage"=>"1", "_"=>""}
  [4;35;1mItem Load (0.6ms)[0m   [0mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;36;1mItemStorage Load (0.8ms)[0m   [0;1mSELECT * FROM "item_storages" WHERE (storage_id = E'1' AND item_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mStorage Load (0.5ms)[0m   [0;1mSELECT * FROM "storages" WHERE ("storages"."id" = 1) [0m
  [4;35;1mStorage Exists (0.5ms)[0m   [0mSELECT "storages".id FROM "storages" WHERE ("storages"."name" = E'storage 1' AND "storages".id <> 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "items" WHERE ("items"."id" = 1) [0m
  [4;35;1mCatalogue Load (0.6ms)[0m   [0mSELECT * FROM "catalogues" WHERE ("catalogues"."id" = 1) [0m
  [4;36;1mCatalogue Exists (0.5ms)[0m   [0;1mSELECT "catalogues".id FROM "catalogues" WHERE ("catalogues"."name" = E'Catalogue 1' AND "catalogues".id <> 1) LIMIT 1[0m
  [4;35;1mItemStorage Exists (0.3ms)[0m   [0mSELECT "item_storages".id FROM "item_storages" WHERE ("item_storages"."item_id" = 1 AND "item_storages".storage_id = 1 AND "item_storages".id <> 1) LIMIT 1[0m
  [4;36;1mItemStorage Update (0.4ms)[0m   [0;1mUPDATE "item_storages" SET "updated_at" = '2010-05-31 16:01:51.259281', "quantity" = 4 WHERE "id" = 1[0m
  [4;35;1mSQL (1.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
  [4;35;1mItemStorage Load (0.2ms)[0m   [0mSELECT * FROM "item_storages" WHERE ("item_storages".item_id = 1) [0m
Rendered items/_buy_button (0.4ms)
Completed in 105ms (View: 4, DB: 7) | 200 OK [http://localhost/items/buy/1]
